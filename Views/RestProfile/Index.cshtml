@{
    <link href="~/css/ownerProfile.css" rel="stylesheet" />
    ViewData["Title"] = "Restaurant Profile";
    var details = ViewBag.RestaurantDetails as RestaurantsModel;
    var followerCounts = ViewBag.FollowerCounts as Dictionary<string, int>;
    var restaurantId = "12345"; // Replace with your specific restaurant ID
    var followerCount = followerCounts.ContainsKey(restaurantId) ? followerCounts[restaurantId] : 0;
}

<div class="container">
    <div class="profile-header">
        <div class="row">
            <div class="position-relative ">
                <img disabled src="~/assets/RestaurantStuff/Cover.jpg" alt="Cover Photo" class="img-fluid w-100"
                    style="height: 300px; object-fit: cover;">
                <div class="profile-info col-sm">
                    <img disabled src="~/assets/RestaurantStuff/ProfilePage.jpg" alt="Profile Photo"
                        class="profile-photo rounded-circle border border-white" style="width: 200px; height: 200px;">
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-2">
                </div>
                <div class="col-8">
                    <h2 >@details.RestName</h2>

                    <p>Rating:
                        <span class="star-rating">
                            @{
                                float rating = details.RestRatings ?? 0f; // Assuming details.RestRatings is a float
                                int fullStars = (int)rating;
                                bool hasHalfStar = rating - fullStars >= 0.5;
                                int emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0); // Assuming a 5-star rating system

                                for (int i = 0; i < fullStars; i++)
                                {
                                    @:<i class="fas fa-star"></i>
                                }
                                if (hasHalfStar)
                                {
                                    @:<i class="fas fa-star-half-alt"></i>
                                }
                                for (int i = 0; i < emptyStars; i++)
                                {
                                    @:<i class="far fa-star"></i>
                                }
                            }
                        </span>
                        @details.RestRatings
                    </p>
                    <p class="website-link">
                        <i class="fas fa-link"></i>
                        <a href="@details.RestWebsite" target="_blank">@details.RestWebsite</a>
                    </p>

                    <div class="profile-bio">
                        <p><strong>Bio: </strong>@details.RestBio</p>

                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-md text-center">
                    <span><strong>0</strong> posts</span>
                </div>
                <div class="col-md text-center ">
                    <span><strong>@followerCount</strong> followers</span>
                </div>
                <div class="col-md text-center">
                    <span><strong>107</strong> following</span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md">
                <div class="profile-tabs">
                    <ul class="nav nav-tabs mt-3 justify-content-center">
                        <li class="nav-item Active">
                            <button class="nav-link active" onclick="openTab(event, 'posts')">Posts</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" onclick="openTab(event, 'About')">About</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" onclick="openTab(event, 'Photos')">Photos</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" onclick="openTab(event, 'Videos')">Videos</button>
                        </li>

                    </ul>
                </div>

            </div>
        </div>
    </div>
    <div class="profile-body">
        <div id="posts" class="tab-content">
            <div class="row">
                <div class="col-md-2">sss</div>
                <div class="col-md-8">ss</div>
                <div class="col-md-2">ss</div>

            </div>
        </div>
        <div id="About" class="tab-content" style="display: none">
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <div class="list-group">
                            <h3>About</h3>
                            <a href="#" class="list-group-item list-group-item-action active">Contact and basic info</a>
                            <a href="#" class="list-group-item list-group-item-action">Page transparency</a>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <div>
                            <h4>Categories</h4>
                            <p>Bar</p>
                            <h5>Contact info: @details.RestContact</h5>
                            <h5>Email Address: @details.RestEmail</h5>
                            <div id="map" style="height: 400px; width: 100%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="Reels" class="tab-content" style="display: none">
            <h3>Reels</h3>
            <!-- Add content for Reels here -->
        </div>
        <div id="Photos" class="tab-content" style="display: none">
            <h3>Photos</h3>
            <!-- Add content for Photos here -->
        </div>
        <div id="Videos" class="tab-content" style="display: none">
            <h3>Videos</h3>
            <!-- Add content for Videos here -->
        </div>

    </div>

</div>




@section Scripts {
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBcZ-tpp7-d401k61UO39tGYGvq-yOAn1s&callback=initMap" async
        defer></script>
    <script>
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("nav-link");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }

        function initMap() {
            var location = { lat: @details.RestLat, lng: @details.RestLong }; // Example coordinates for Singapore
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: location
            });
            var marker = new google.maps.Marker({
                position: location,
                map: map
            });
        }
    </script>
}